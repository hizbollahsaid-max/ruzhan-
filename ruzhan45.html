<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ùêëùêîùêêùêáùêÄùêç ùêéùêÖùêÖùêàùêÇùêàùêÄùêã</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Firebase SDK (Version 8) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    
    <style>
        :root {
            --primary-yellow: #ffcf33;
            --black-bg: #000000;
            --card-dark: #1a1a1a;
            --text-white: #ffffff;
            --border-color: #333333;
        }

        body {
            font-family: 'Hind Siliguri', sans-serif;
            background: var(--black-bg);
            color: var(--text-white);
            margin: 0; padding: 0;
            overflow-x: hidden;
            padding-bottom: 110px;
        }

        /* --- Auth Section Styles --- */
        #authSection {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999; display: flex; align-items: center; justify-content: center;
        }
        .auth-container { width: 90%; max-width: 400px; background: var(--card-dark); padding: 30px; border-radius: 20px; border: 1px solid var(--border-color); text-align: center; overflow: hidden; }
        
        .auth-container img { 
            width: calc(100% + 60px); 
            background: #ffffff; 
            margin: -30px -30px 20px -30px; 
            padding: 20px 0; 
            object-fit: contain;
            height: 80px;
        }

        .auth-tabs { display: flex; margin-bottom: 20px; border-bottom: 1px solid #333; }
        .auth-tab { flex: 1; padding: 10px; cursor: pointer; color: #888; }
        .auth-tab.active { color: var(--primary-yellow); border-bottom: 2px solid var(--primary-yellow); }
        .auth-form { display: none; }
        .auth-form.active { display: block; }

        .top-nav {
            background: #ffffff;
            padding: 0 20px;
            display: flex;
            justify-content: flex-end; 
            align-items: center;
            border-bottom: 1px solid var(--border-color);
            position: sticky; 
            top: 0; 
            z-index: 1000;
            height: 70px;
        }
        .nav-logo { 
            position: absolute;
            left: 50%; top: 50%;
            transform: translate(-50%, -50%);
            display: flex; align-items: center; 
            height: 100%;
        }
        .nav-logo img { width: 220px; height: 70px; object-fit: contain; }

        .sidebar {
            position: fixed; top: 0; right: -280px; width: 280px; height: 100%;
            background: #111; z-index: 3000; transition: 0.4s;
            box-shadow: -5px 0 15px rgba(0,0,0,0.5);
            padding: 20px; box-sizing: border-box;
            overflow-y: auto;
        }
        .sidebar.active { right: 0; }
        .sidebar-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 2999;
        }
        .sidebar-link {
            display: flex; align-items: center; gap: 12px;
            padding: 15px 10px; color: #ccc; text-decoration: none;
            border-bottom: 1px solid #222; cursor: pointer;
        }
        .lang-select { margin-top: 20px; padding: 10px; background: #222; border: 1px solid var(--primary-yellow); color: #fff; width: 100%; border-radius: 10px; }

        .full-panel {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #000;
            z-index: 4000;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }
        .back-btn { color: var(--primary-yellow); cursor: pointer; font-size: 18px; margin-bottom: 20px; display: inline-block; font-weight: bold;}
        .panel-card { background: var(--card-dark); padding: 20px; border-radius: 20px; border: 1px solid var(--border-color); margin-bottom: 15px; }
        .panel-card h2 { color: var(--primary-yellow); margin-top: 0; text-align: center; }

        /* --- Refer Panel Styles --- */
        .refer-balance-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #000000 100%);
            padding: 25px;
            border-radius: 25px;
            border: 1px solid #333;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 4px solid var(--primary-yellow);
        }
        .refer-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .refer-option-card {
            background: #151515;
            padding: 20px 10px;
            border-radius: 20px;
            border: 1px solid #222;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
        }
        .refer-option-card:active { transform: scale(0.95); }
        .refer-option-card i {
            font-size: 28px;
            margin-bottom: 10px;
            display: block;
            color: var(--primary-yellow);
        }
        .refer-option-card .opt-label { font-size: 13px; color: #aaa; margin-bottom: 5px; }
        .refer-option-card .opt-value { font-size: 14px; font-weight: bold; color: #fff; }

        .job-btn { display: block; text-align: center; padding: 12px; margin: 10px 0; border-radius: 10px; text-decoration: none; font-weight: bold; }
        .work-btn { background: var(--primary-yellow); color: #000; }
        .video-btn { background: #ff0000; color: #fff; }
        .input-group { margin-top: 15px; }
        .input-group label { display: block; margin-bottom: 8px; color: #bbb; font-size: 14px; }
        .input-group input, .input-group select { width: 100%; padding: 12px; background: #000; border: 1px solid var(--border-color); color: #fff; border-radius: 10px; box-sizing: border-box; }

        .submit-work-btn { width: 100%; padding: 15px; background: #4CAF50; color: #fff; border: none; border-radius: 10px; margin-top: 20px; font-weight: bold; cursor: pointer; }

        /* --- History Styles --- */
        .history-container { margin-top: 20px; }
        .history-card {
            background: #151515; border: 1px solid #222; padding: 15px; border-radius: 18px; margin-bottom: 15px;
            border-left: 4px solid var(--primary-yellow); position: relative; overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
        }
        .history-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .history-title { font-weight: 700; color: #fff; font-size: 15px; display: flex; align-items: center; gap: 8px; }
        .history-title i { color: var(--primary-yellow); font-size: 14px; }
        
        .status-badge { padding: 4px 10px; border-radius: 8px; font-size: 10px; font-weight: bold; text-transform: uppercase; letter-spacing: 0.5px; }
        .status-pending { background: #3d3416; color: #ffcf33; border: 1px solid #5c4e1d; }
        .status-approved { background: #1b4d2e; color: #4CAF50; border: 1px solid #276d41; }
        .status-rejected { background: #4d1b1b; color: #ff4444; border: 1px solid #6d2727; }

        .history-body { display: flex; justify-content: space-between; align-items: flex-end; font-size: 13px; color: #aaa; margin-top: 10px; border-top: 1px solid #222; padding-top: 10px; }
        .amount-text { color: var(--primary-yellow); font-weight: 800; font-size: 16px; }
        
        .history-prayer-row {
            display: flex; gap: 5px; margin-top: 10px; flex-wrap: wrap; padding-top: 8px; border-top: 1px dashed #333;
        }
        .mini-prayer-tag {
            font-size: 10px; padding: 2px 6px; border-radius: 5px; display: flex; align-items: center; gap: 4px; font-weight: 600;
        }
        .p-tag-yes { background: #1b4d2e33; color: #4CAF50; border: 1px solid #1b4d2e; }
        .p-tag-no { background: #4d1b1b33; color: #f44336; border: 1px solid #4d1b1b; }

        .tutorial-list { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .tutorial-item { background: #111; padding: 15px; border-radius: 15px; border: 1px solid var(--border-color); text-align: center; cursor: pointer; }
        .tutorial-item i { font-size: 30px; color: #ff0000; margin-bottom: 10px; display: block; }
        .tutorial-item span { font-size: 11px; font-weight: bold; display: block; color: #fff; }

        .profile-area { 
            background: var(--primary-yellow); 
            padding: 30px 20px 80px 20px; 
            border-bottom-left-radius: 40px; 
            border-bottom-right-radius: 40px; 
            display: flex; 
            align-items: center; 
            gap: 15px; 
            position: relative;
            min-height: 110px; 
        }
        .user-avatar { width: 70px; height: 70px; border-radius: 50%; border: 3px solid #000; overflow: hidden; background: #fff; }
        .user-avatar img { width: 100%; height: 100%; object-fit: contain; }
        .user-info { color: #000; flex: 1; }
        .user-name { font-size: 18px; font-weight: 700; display: flex; align-items: center; gap: 5px; }
        .user-id-box { background: rgba(0,0,0,0.1); padding: 2px 10px; border-radius: 20px; font-size: 12px; margin-top: 5px; display: inline-block; }

        .id-status-badge { font-size: 10px; font-weight: bold; padding: 3px 8px; border-radius: 5px; margin-top: 5px; display: inline-block; text-transform: uppercase; }
        .status-active { background: #1b4d2e; color: #4CAF50; }
        .status-inactive { background: #4d1b1b; color: #f44336; }
        .activate-btn-ui { position: absolute; right: 20px; top: 40px; background: #000; color: var(--primary-yellow); padding: 8px 12px; border-radius: 10px; font-size: 12px; font-weight: bold; cursor: pointer; border: 1px solid #333; }

        .stats-container { 
            display: flex; 
            gap: 15px; 
            margin: -50px 20px 20px 20px; 
            position: relative;
            z-index: 10;
        }
        .stat-card { 
            flex: 1; 
            background: #1a1a1a; 
            padding: 20px 15px; 
            border-radius: 20px; 
            border: 1px solid #333; 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        .stat-icon { 
            width: 45px; 
            height: 45px; 
            background: #222; 
            border-radius: 15px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: var(--primary-yellow); 
            font-size: 22px; 
            border: 1px solid #333;
        }
        .stat-text .stat-label { font-size: 11px; color: #888; margin-bottom: 2px; }
        .stat-text .stat-value { font-size: 15px; font-weight: bold; color: #fff; }
        
        .job-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 10px 20px; margin-bottom: 20px; }
        .job-item { text-align: center; cursor: pointer; }
        .job-icon-box { background: var(--card-dark); width: 55px; height: 55px; margin: 0 auto 8px; border-radius: 15px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--border-color); }
        .job-icon-box i { font-size: 24px; }
        .job-item span { font-size: 11px; font-weight: 600; color: #ccc; display: block; }

        .invite-section { background: var(--card-dark); margin: 10px 20px; padding: 20px; border-radius: 25px; border: 1px solid var(--border-color); text-align: center; }
        .invite-title { font-size: 16px; font-weight: bold; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .refer-box { background: #000; border: 2px solid var(--primary-yellow); border-radius: 15px; display: flex; justify-content: space-between; align-items: center; padding: 5px 5px 5px 15px; margin-bottom: 15px; }
        .refer-box span { font-size: 12px; color: #bbb; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .copy-btn { background: #000; color: var(--primary-yellow); border: 1px solid var(--primary-yellow); padding: 8px 15px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 12px; }
        .social-icons { display: flex; justify-content: center; gap: 15px; margin-top: 10px; }
        .social-icons i { width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; color: #000; background: var(--primary-yellow); cursor: pointer; }

        .quick-links-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 0 20px; margin-top: 20px; }
        .link-card { background: var(--card-dark); padding: 15px 5px; border-radius: 15px; border-bottom: 3px solid var(--primary-yellow); text-align: center; cursor: pointer; }
        .link-card i { font-size: 20px; display: block; margin-bottom: 5px; color: #fff; }
        .link-card span { font-size: 13px; font-weight: bold; }

        .section-heading { text-align: center; font-size: 18px; font-weight: bold; margin: 30px 0 15px; color: #fff; }
        .admin-card { background: var(--card-dark); margin: 10px 20px; padding: 15px; border-radius: 20px; border-left: 5px solid var(--primary-yellow); display: flex; align-items: center; gap: 15px; position: relative; }
        .admin-photo { width: 70px; height: 70px; border-radius: 50%; overflow: hidden; background: #fff; }
        .admin-photo img { width: 100%; height: 100%; object-fit: contain; }
        .main-admin-badge { position: absolute; right: 15px; top: 15px; background: #3d3416; color: var(--primary-yellow); font-size: 10px; padding: 3px 8px; border-radius: 5px; font-weight: bold; }
        .message-btn { background: #1d9bf0; color: #fff; border: none; padding: 6px 15px; border-radius: 8px; font-size: 12px; font-weight: bold; margin-top: 5px; display: flex; align-items: center; gap: 5px; cursor: pointer; }

        .navbar { position: fixed; bottom: 0; width: 100%; background: #111; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid var(--border-color); z-index: 1000;}
        .navbar div { color: #666; text-align: center; font-size: 12px; cursor: pointer; }
        .navbar div.active { color: var(--primary-yellow); }

        .method-item { background: #222; margin-bottom: 10px; padding: 12px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #333;}
        .method-name { display: flex; align-items: center; gap: 10px; font-weight: bold; }
        .method-name img { height: 25px; }
        .copy-small { background: var(--primary-yellow); color: #000; padding: 4px 8px; border-radius: 5px; font-size: 10px; cursor: pointer; font-weight: bold; }

        .prayer-row { display: flex; align-items: center; justify-content: space-between; background: #222; margin-bottom: 8px; padding: 10px 15px; border-radius: 10px; }
        .prayer-name { font-weight: bold; font-size: 14px; }
        .prayer-btns { display: flex; gap: 10px; }
        .prayer-btn { width: 35px; height: 35px; border-radius: 50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 14px; background: #444; }
        .prayer-btn.yes.active { background: #4CAF50; }
        .prayer-btn.no.active { background: #f44336; }

        .team-member-item {
            display: flex; justify-content: space-between; align-items: center;
            background: #151515; padding: 12px 15px; border-radius: 12px; border: 1px solid #222; margin-bottom: 8px;
        }

        /* --- Target Offer New Styles --- */
        .target-card {
            background: #111; border: 1px solid #333; border-radius: 15px; padding: 15px; margin-bottom: 15px;
            position: relative; overflow: hidden; border-left: 4px solid var(--primary-yellow);
        }
        .target-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .target-name { font-weight: bold; color: var(--primary-yellow); font-size: 16px; }
        .target-reward-tag { background: #3d3416; color: var(--primary-yellow); padding: 3px 10px; border-radius: 5px; font-size: 12px; font-weight: bold; }
        
        .progress-container { background: #222; height: 12px; border-radius: 10px; width: 100%; margin: 10px 0; overflow: hidden; position: relative; }
        .progress-bar-fill { background: linear-gradient(90deg, #ffcf33, #ff9800); height: 100%; width: 0%; transition: 1s ease-in-out; }
        .progress-text { font-size: 11px; color: #888; display: flex; justify-content: space-between; margin-top: 5px; }

        .prize-display { display: flex; align-items: center; gap: 10px; margin-top: 10px; background: rgba(255, 207, 51, 0.05); padding: 8px; border-radius: 8px; }
        .prize-display i { font-size: 20px; color: var(--primary-yellow); }
        .prize-display span { font-size: 12px; color: #ccc; }

        .claim-btn {
            width: 100%; padding: 10px; border-radius: 8px; border: none; font-weight: bold; margin-top: 15px;
            cursor: not-allowed; background: #333; color: #666; transition: 0.3s;
        }
        .claim-btn.ready { background: var(--primary-yellow); color: #000; cursor: pointer; box-shadow: 0 0 10px rgba(255, 207, 51, 0.3); }
        .claim-btn.claimed { background: #1b4d2e; color: #4CAF50; cursor: default; }

        /* --- Islamic Specific Styles --- */
        .islamic-card { background: var(--card-dark); border: 1px solid var(--border-color); padding: 20px; border-radius: 20px; margin-bottom: 15px; text-align: center; }
        .arabic-text { font-size: 24px; font-weight: bold; margin: 15px 0; color: #fff; line-height: 1.6; }

    </style>
</head>
<body>

    <div id="authSection">
        <div class="auth-container">
            <img src="https://i.ibb.co/CKSzHY89/18714.jpg" alt="Logo">
            <div class="auth-tabs">
                <div class="auth-tab active" id="loginTab" onclick="switchAuth('login')">‡¶≤‡¶ó‡¶á‡¶®</div>
                <div class="auth-tab" id="signupTab" onclick="switchAuth('signup')">‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®</div>
            </div>

            <div id="loginForm" class="auth-form active">
                <div class="input-group"><input type="email" id="l_email" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤"></div>
                <div class="input-group"><input type="password" id="l_pass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°"></div>
                <button class="submit-work-btn" onclick="handleLogin()" style="background:var(--primary-yellow); color:#000;">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>

            <div id="signupForm" class="auth-form">
                <div class="input-group"><input type="text" id="s_name" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ"></div>
                <div class="input-group"><input type="email" id="s_email" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶°‡ßç‡¶∞‡ßá‡¶∏"></div>
                <div class="input-group"><input type="number" id="s_phone" placeholder="‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ (‡ßß‡ßß ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ)"></div>
                <div class="input-group"><input type="password" id="s_pass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° (‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ)"></div>
                <div class="input-group"><input type="text" id="s_refer" placeholder="‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶®"></div>
                <button class="submit-work-btn" onclick="handleSignup()" style="background:var(--primary-yellow); color:#000;">‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®</button>
            </div>
        </div>
    </div>

    <div id="appMain" style="display: none;">

        <!-- Ramadan Offer Panel -->
        <div id="ramadanOfferPanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('ramadanOfferPanel')"><i class="fa-solid fa-arrow-left"></i> <span>‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            <div class="panel-card" style="border-bottom: 3px solid #00FF00; background: linear-gradient(to bottom, #1a1a1a, #0a2a0a);">
                <h2 style="color: #00FF00; margin-bottom: 5px;"><i class="fa-solid fa-moon"></i> ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶Ö‡¶´‡¶æ‡¶∞</h2>
                <p style="text-align: center; font-size: 13px; color: #ccc;">‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶Æ‡ßã‡¶¨‡¶æ‡¶∞‡¶ï!‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á‡¶° ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ú‡¶ø‡¶§‡ßá ‡¶®‡¶ø‡¶®!‡¶∏‡¶Æ‡¶Ø‡¶º ‡ß®‡ßÆ ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡ßß‡ß®:‡ß¶‡ß¶</p>
            </div>
            
            <div id="ramadanListContainer" style="padding-bottom: 30px;">
                <!-- JS ‡¶¶‡¶ø‡ßü‡ßá ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá -->
            </div>
        </div>

        <!-- Islamic Panel -->
        <div id="islamicPanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('islamicPanel')"><i class="fa-solid fa-arrow-left"></i> <span>‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            <div class="panel-card">
                <h2>‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶ï‡¶∞‡ßç‡¶£‡¶æ‡¶∞</h2>
                <p style="text-align: center; color: #ccc; font-size: 13px;">‡¶™‡¶¨‡¶ø‡¶§‡ßç‡¶∞ ‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶® ‡¶ì ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏‡ßá‡¶∞ ‡¶Ü‡¶≤‡ßã‡¶ï‡ßá ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶ó‡ßú‡¶ø‡•§</p>
            </div>
            <div class="islamic-card">
                <h3 style="color: var(--primary-yellow);">‡¶ï‡¶æ‡¶≤‡¶ø‡¶Æ‡¶æ ‡¶§‡¶æ‡¶á‡ßü‡ßç‡¶Ø‡ßá‡¶¨‡¶æ</h3>
                <div class="arabic-text">ŸÑŸéÿß ÿ•ŸêŸÑŸ∞ŸáŸé ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸáŸè ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸå ÿ±Ÿéÿ≥ŸèŸàŸÑŸè ÿßŸÑŸÑŸáŸê</div>
                <p style="color: #ccc; font-size: 14px;">‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶õ‡¶æ‡ßú‡¶æ ‡¶ï‡ßã‡¶®‡ßã ‡¶â‡¶™‡¶æ‡¶∏‡ßç‡¶Ø ‡¶®‡ßá‡¶á, ‡¶Æ‡ßÅ‡¶π‡¶æ‡¶Æ‡ßç‡¶Æ‡¶æ‡¶¶ (‡¶∏‡¶æ.) ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶∞ ‡¶∞‡¶æ‡¶∏‡ßÇ‡¶≤‡•§</p>
            </div>
            <div class="islamic-card">
                <h3 style="color: var(--primary-yellow);">‡¶Ü‡ßü‡¶æ‡¶§‡ßÅ‡¶≤ ‡¶ï‡ßÅ‡¶∞‡¶∏‡¶ø</h3>
                <div class="arabic-text">ÿßŸÑŸÑŸéŸëŸáŸè ŸÑŸéÿß ÿ•ŸêŸÑŸéŸáŸé ÿ•ŸêŸÑŸéŸëÿß ŸáŸèŸàŸé ÿßŸÑŸíÿ≠ŸéŸäŸèŸë ÿßŸÑŸíŸÇŸéŸäŸèŸëŸàŸÖŸè...</div>
                <p style="color: #ccc; font-size: 14px;">‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶®‡ßá‡¶∞ ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶Æ‡¶π‡¶ø‡¶Æ‡¶æ‡¶®‡ßç‡¶¨‡¶ø‡¶§ ‡¶Ü‡ßü‡¶æ‡¶§‡•§</p>
            </div>
        </div>

        <div id="activationPanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('activationPanel')"><i class="fa-solid fa-arrow-left"></i> <span>‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            <div class="panel-card">
                <h2>‡¶Ü‡¶á‡¶°‡¶ø ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                
                <div style="background: #333; padding: 15px; border-radius: 15px; margin-bottom: 20px; text-align: center; border: 1px dashed var(--primary-yellow);">
                    <span style="font-size: 14px; color: #ccc; display: block; margin-bottom: 5px;">‡¶Ü‡¶á‡¶°‡¶ø ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶® ‡¶´‡¶ø:</span>
                    <div style="font-size: 26px; font-weight: 800; color: var(--primary-yellow);">‡ß≥ <span id="display_activation_fee">0</span></div>
                </div>

                <p style="font-size: 13px; color: #ccc; text-align: center;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø‡¶ü‡¶ø ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶´‡¶ø ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶´‡¶∞‡ßç‡¶Æ‡¶ü‡¶ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                
                <div class="method-item">
                    <div class="method-name"><img src="https://i.ibb.co/R76mK4G/bkash.png"> ‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂: <span id="act_bkash">017XXXXXXXX</span></div>
                    <div class="copy-small" onclick="copyText('act_bkash')">COPY</div>
                </div>
                <div class="method-item">
                    <div class="method-name"><img src="https://i.ibb.co/5hMh4fF/nagad.png"> ‡¶®‡¶ó‡¶¶: <span id="act_nagad">018XXXXXXXX</span></div>
                    <div class="copy-small" onclick="copyText('act_nagad')">COPY</div>
                </div>
                <div class="method-item">
                    <div class="method-name"><img src="https://i.ibb.co/6P6X7mY/rocket.png"> ‡¶∞‡¶ï‡ßá‡¶ü: <span id="act_rocket">019XXXXXXXX</span></div>
                    <div class="copy-small" onclick="copyText('act_rocket')">COPY</div>
                </div>

                <div class="input-group">
                    <label>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                    <select id="a_method">
                        <option value="Bkash">Bkash</option>
                        <option value="Nagad">Nagad</option>
                        <option value="Rocket">Rocket</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:</label>
                    <input type="number" id="a_amount" placeholder="‡¶∏‡¶†‡¶ø‡¶ï ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶¶‡¶ø‡¶®">
                </div>
                <div class="input-group">
                    <label>‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶® (TrxID):</label>
                    <input type="text" id="a_trxid" placeholder="Ex: 8N7X6W5Q">
                </div>
                <div class="input-group">
                    <label>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶ø‡¶®:</label>
                    <input type="text" id="a_ss_link" placeholder="https://imgbb.com/...">
                </div>
                <button class="submit-work-btn" onclick="submitActivation()">‡¶Ü‡¶á‡¶°‡¶ø ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶® ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
            </div>
        </div>

        <div id="referPanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('referPanel')"><i class="fa-solid fa-arrow-left"></i> <span>‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            
            <div class="refer-balance-card">
                <div style="font-size: 14px; color: #aaa; margin-bottom: 5px;">‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ì‡ßü‡¶æ‡¶≤‡ßá‡¶ü (‡¶ï‡¶Æ‡¶ø‡¶∂‡¶®)</div>
                <div id="refer_panel_balance" style="font-size: 32px; font-weight: 800; color: var(--primary-yellow);">‡ß≥ 0.00</div>
            </div>

            <div class="refer-grid">
                <div class="refer-option-card" onclick="toggleTeamList()">
                    <i class="fa-solid fa-users-viewfinder"></i>
                    <div class="opt-label">‡¶Æ‡¶æ‡¶á ‡¶ü‡¶ø‡¶Æ</div>
                    <div id="display_team_count" class="opt-value">‡ß¶ ‡¶ú‡¶® (‡¶è‡¶ï‡¶ü‡¶ø‡¶≠)</div>
                </div>
                <div class="refer-option-card" onclick="openReferWithdraw()">
                    <i class="fa-solid fa-money-bill-transfer" style="color: #4CAF50;"></i>
                    <div class="opt-label">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</div>
                    <div class="opt-value" style="color: #4CAF50;">‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßÅ‡¶≤‡ßÅ‡¶®</div>
                </div>
            </div>

            <div class="invite-section">
                <div class="invite-title"><i class="fa-solid fa-share-nodes" style="color:var(--primary-yellow)"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶®‡¶≠‡¶æ‡¶á‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</div>
                <div class="refer-box">
                    <span id="referLinkPanel">https://ruzhanbd.netlify.app/?by=...</span>
                    <button class="copy-btn" onclick="copyLink()">Copy</button>
                </div>
                <div class="social-icons">
                    <i class="fa-brands fa-facebook" style="background: #1877F2; color: #fff;"></i>
                    <i class="fa-brands fa-whatsapp" style="background: #25D366; color: #fff;"></i>
                    <i class="fa-brands fa-telegram" style="background: #0088cc; color: #fff;"></i>
                    <i class="fa-brands fa-facebook-messenger" style="background: #006AFF; color: #fff;"></i>
                </div>
            </div>

            <div id="teamListArea" style="display: none; padding: 0 20px; margin-top: 20px;">
                <h3 style="color: var(--primary-yellow); font-size: 16px; margin-bottom: 15px; text-align: center;">‡¶ü‡¶ø‡¶Æ ‡¶Æ‡ßá‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ (‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü)</h3>
                <div id="teamMembersContainer"></div>
            </div>
        </div>

        <div id="referWithdrawPanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('referWithdrawPanel')"><i class="fa-solid fa-arrow-left"></i> <span>‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            <div class="panel-card" style="text-align: center; border-bottom: 3px solid #4CAF50;">
                <div style="font-size: 14px; color: #bbb;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</div>
                <div id="rw_display_balance" style="font-size: 24px; font-weight: bold; color: #4CAF50; margin-top: 5px;">‡ß≥ 0.00</div>
            </div>
            <div class="panel-card">
                <h2 style="color: #4CAF50;">‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</h2>
                <div class="input-group">
                    <label>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                    <select id="rw_method">
                        <option value="Bkash">Bkash (‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂)</option>
                        <option value="Nagad">Nagad (‡¶®‡¶ó‡¶¶)</option>
                        <option value="Rocket">Rocket (‡¶∞‡¶ï‡ßá‡¶ü)</option>
                    </select>
                </div>
                <div class="input-group"><label>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡¶ü‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:</label><input type="number" id="rw_number" placeholder="017XXXXXXXX"></div>
                <div class="input-group"><label>‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡ß≥):</label><input type="number" id="rw_amount" placeholder="‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ"></div>
                <button class="submit-work-btn" onclick="initiateReferWithdraw()" style="background: #4CAF50;">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>

        <div id="prayerPopup" class="full-panel" style="background: rgba(0,0,0,0.8); z-index: 5000; display: none; align-items: center; justify-content: center;">
            <div class="panel-card" style="width: 90%; max-width: 350px;">
                <h2 style="font-size: 18px; margin-bottom: 5px;">‡¶∏‡¶æ‡¶≤‡¶æ‡¶§ ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á‡¶ï‡¶∞‡¶£</h2>
                <p style="text-align: center; color: #ccc; font-size: 13px; margin-bottom: 20px;">‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶ó‡¶§‡¶ï‡¶æ‡¶≤ ‡ß´ ‡¶ì‡¶Ø‡¶º‡¶æ‡¶ï‡ßç‡¶§ ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú ‡¶™‡ßú‡ßá‡¶õ‡ßá‡¶®?</p>
                
                <div id="prayerOptions">
                    <div class="prayer-row" data-prayer="Fajr"><span class="prayer-name">‡¶´‡¶ú‡¶∞</span><div class="prayer-btns"><button class="prayer-btn yes" onclick="selectPrayer(this, 'yes')"><i class="fa-solid fa-check"></i></button><button class="prayer-btn no" onclick="selectPrayer(this, 'no')"><i class="fa-solid fa-xmark"></i></button></div></div>
                    <div class="prayer-row" data-prayer="Dhuhr"><span class="prayer-name">‡¶Ø‡ßã‡¶π‡¶∞</span><div class="prayer-btns"><button class="prayer-btn yes" onclick="selectPrayer(this, 'yes')"><i class="fa-solid fa-check"></i></button><button class="prayer-btn no" onclick="selectPrayer(this, 'no')"><i class="fa-solid fa-xmark"></i></button></div></div>
                    <div class="prayer-row" data-prayer="Asr"><span class="prayer-name">‡¶Ü‡¶∏‡¶∞</span><div class="prayer-btns"><button class="prayer-btn yes" onclick="selectPrayer(this, 'yes')"><i class="fa-solid fa-check"></i></button><button class="prayer-btn no" onclick="selectPrayer(this, 'no')"><i class="fa-solid fa-xmark"></i></button></div></div>
                    <div class="prayer-row" data-prayer="Maghrib"><span class="prayer-name">‡¶Æ‡¶æ‡¶ó‡¶∞‡¶ø‡¶¨</span><div class="prayer-btns"><button class="prayer-btn yes" onclick="selectPrayer(this, 'yes')"><i class="fa-solid fa-check"></i></button><button class="prayer-btn no" onclick="selectPrayer(this, 'no')"><i class="fa-solid fa-xmark"></i></button></div></div>
                    <div class="prayer-row" data-prayer="Isha"><span class="prayer-name">‡¶è‡¶∂‡¶æ</span><div class="prayer-btns"><button class="prayer-btn yes" onclick="selectPrayer(this, 'yes')"><i class="fa-solid fa-check"></i></button><button class="prayer-btn no" onclick="selectPrayer(this, 'no')"><i class="fa-solid fa-xmark"></i></button></div></div>
                </div>

                <button class="submit-work-btn" onclick="confirmPrayerSubmit()" style="margin-top: 15px;">‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <div style="text-align: center; margin-top: 10px; cursor: pointer; color: #888; font-size: 13px;" onclick="document.getElementById('prayerPopup').style.display='none'">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</div>
            </div>
        </div>

        <div id="newJobSelectPanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('newJobSelectPanel')"><i class="fa-solid fa-arrow-left"></i> <span>‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            <div class="panel-card">
                <h2 data-key="new_job">‡¶®‡¶ø‡¶â ‡¶ú‡¶¨</h2>
                <div class="job-grid" style="grid-template-columns: repeat(2, 1fr); padding: 0;">
                    <div class="job-item" onclick="openJob('coinsell')">
                        <div class="job-icon-box" style="width: 80px; height: 80px;"><i class="fa-solid fa-coins" style="color: var(--primary-yellow); font-size: 30px;"></i></div>
                        <span style="font-size: 14px;" data-key="coinsell">‡¶ï‡ßü‡ßá‡¶® ‡¶∏‡ßá‡¶≤</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="jobPanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('jobPanel')"><i class="fa-solid fa-arrow-left"></i> <span data-key="back">‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            
            <div class="panel-card" id="standard_job_box">
                <h2 id="p_title">Job Title</h2>
                <a href="#" id="p_work_link" target="_blank" class="job-btn work-btn" data-key="work_link">‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</a>
                <a href="#" id="p_video_link" target="_blank" class="job-btn video-btn" data-key="video_link">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ü‡¶ø‡¶â‡¶ü‡ßã‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤</a>
                <div class="input-group">
                    <label data-key="coin_label">‡¶ï‡¶§ ‡¶ï‡ßü‡ßá‡¶® ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:</label>
                    <input type="number" id="work_coins" placeholder="0.00" oninput="calculateTaka()">
                    <div id="coinToTaka" style="color: var(--primary-yellow); font-size: 14px; margin-top: 8px; font-weight: bold;">‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶ï‡¶æ: ‡ß≥ 0.00</div>
                </div>
                <div class="input-group">
                    <label data-key="ss_label">‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ú‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®:</label>
                    <input type="text" id="screenshot_link" placeholder="https://...">
                    <a href="https://imgbb.com" target="_blank" style="color:var(--primary-yellow); font-size:12px; text-decoration:none; margin-top:8px; display:inline-block; font-weight:500;">
                        <i class="fa-solid fa-link"></i> ‡¶è‡¶ñ‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
                    </a>
                </div>
                <button class="submit-work-btn" onclick="submitWork()" data-key="submit_btn">‡¶ï‡¶æ‡¶ú ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
            </div>

            <div class="panel-card" id="coin_apply_box" style="display: none; border-top: 3px solid var(--primary-yellow);">
                <h2 style="color: var(--primary-yellow);">‡¶ï‡ßü‡ßá‡¶® ‡¶∏‡ßá‡¶≤ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®</h2>
                <div class="input-group">
                    <label>‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßü‡ßá‡¶® ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:</label>
                    <input type="number" id="apply_coins_val" placeholder="‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® 5000000">
                    <p style="font-size: 11px; color: #ff4444; margin-top: 5px; font-weight: bold;">* ‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® 50‡¶≤‡¶æ‡¶ñ ‡¶ï‡ßü‡ßá‡¶® ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶¨‡ßá‡•§</p>
                </div>
                <button class="submit-work-btn" onclick="submitCoinSellApplication()" style="background: var(--primary-yellow); color: #000;">‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
            </div>

            <div class="panel-card" style="background: transparent; border: none; padding: 0;">
                <h3 style="color:var(--primary-yellow); font-size:18px; margin-bottom:15px; text-align:center;">‡¶ú‡¶¨ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø</h3>
                <div id="jobHistoryList" class="history-container"></div>
            </div>
        </div>

        <div id="tutorialPanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('tutorialPanel')"><i class="fa-solid fa-arrow-left"></i> <span data-key="back">‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            <div class="panel-card">
                <h2 data-key="tutorial">‡¶ü‡¶ø‡¶â‡¶ü‡ßã‡¶∞‡¶ø‡ßü‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</h2>
                <div class="tutorial-list">
                    <div class="tutorial-item" id="tutTypingLink"><i class="fa-brands fa-youtube"></i><span data-key="v1">‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶ú‡¶¨ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</span></div>
                    <div class="tutorial-item" id="tutTiktokLink"><i class="fa-brands fa-youtube"></i><span data-key="v5">‡¶ü‡¶ø‡¶ï‡¶ü‡¶ï ‡¶ú‡¶¨ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</span></div>
                    <div class="tutorial-item" id="tutLikeLink"><i class="fa-brands fa-youtube"></i><span data-key="v6">‡¶≤‡¶æ‡¶á‡¶ï ‡¶´‡¶≤‡ßã ‡¶ú‡¶¨ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</span></div>
                    <div class="tutorial-item" id="tutWithdrawLink"><i class="fa-brands fa-youtube"></i><span data-key="v2">‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶®‡¶ø‡ßü‡¶Æ</span></div>
                    <div class="tutorial-item" id="tutReferLink"><i class="fa-brands fa-youtube"></i><span data-key="v3">‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ</span></div>
                    <div class="tutorial-item" id="tutActiveLink"><i class="fa-solid fa-video"></i><span data-key="v4">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ</span></div>
                </div>
            </div>
        </div>

        <div id="withdrawPanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('withdrawPanel')"><i class="fa-solid fa-arrow-left"></i> <span data-key="back">‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            <div class="panel-card" style="text-align: center; border-bottom: 3px solid var(--primary-yellow);">
                <div style="font-size: 14px; color: #bbb;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</div>
                <div id="w_display_balance" style="font-size: 24px; font-weight: bold; color: var(--primary-yellow); margin-top: 5px;">‡ß≥ 0.00</div>
            </div>
            <div class="panel-card">
                <h2 data-key="withdraw">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</h2>
                <div class="input-group">
                    <label data-key="select_method">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
                    <select id="w_method">
                        <option value="Bkash">Bkash (‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂)</option>
                        <option value="Nagad">Nagad (‡¶®‡¶ó‡¶¶)</option>
                        <option value="Rocket">Rocket (‡¶∞‡¶ï‡ßá‡¶ü)</option>
                    </select>
                </div>
                <div class="input-group"><label data-key="num_label">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡¶ü‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:</label><input type="number" id="w_number" placeholder="017XXXXXXXX"></div>
                <div class="input-group"><label data-key="amount_label">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡ß≥):</label><input type="number" id="w_amount" placeholder="‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ"></div>
                <button class="submit-work-btn" onclick="initiateWithdraw()" data-key="withdraw_btn">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
            <div class="panel-card" style="background: transparent; border:none; padding: 0;">
                <h3 style="color:var(--primary-yellow); font-size:18px; margin-bottom:15px; text-align:center;">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø</h3>
                <div id="withdrawList" class="history-container"></div>
            </div>
        </div>

        <div id="profilePanel" class="full-panel">
            <div class="back-btn" onclick="closePanel('profilePanel')"><i class="fa-solid fa-arrow-left"></i> <span data-key="back">‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</span></div>
            <div class="panel-card">
                <h2 style="color:var(--primary-yellow);"><i class="fa-solid fa-user-gear"></i> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h2>
                <div class="input-group"><label>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ:</label><input type="text" id="u_name"></div>
                <div class="input-group"><label>‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞:</label><input type="number" id="u_phone"></div>
                <div class="input-group"><label>‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶°‡ßç‡¶∞‡ßá‡¶∏:</label><input type="email" id="u_email" readonly></div>
                <div class="input-group"><label>‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°:</label><input type="password" id="u_pass"></div>
                <div class="input-group"><label>‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶ø‡¶ï‡¶ö‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï:</label><input type="text" id="u_pic"></div>
                <button class="submit-work-btn" onclick="saveProfile()" style="background:var(--primary-yellow); color:#000;"><i class="fa-solid fa-floppy-disk"></i> ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>

        <div class="top-nav">
            <div class="nav-logo"><img src="https://i.ibb.co/CKSzHY89/18714.jpg" alt="Logo"></div>
            <i class="fa-solid fa-bars" style="font-size: 24px; color: var(--primary-yellow); cursor: pointer;" onclick="toggleSidebar()"></i>
        </div>

        <div id="notice-bar" style="background: #3d3416; color: var(--primary-yellow); padding: 10px; font-size: 13px; text-align: center; border-bottom: 1px solid var(--border-color);">
            ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...
        </div>

        <div class="sidebar-overlay" id="overlay" onclick="toggleSidebar()"></div>
        <div class="sidebar" id="sidebar">
            <h3 data-key="menu_title" style="color:var(--primary-yellow)">‡¶Æ‡ßá‡¶®‡ßÅ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
            <div class="sidebar-link" onclick="location.reload()"><i class="fa-solid fa-house"></i> <span data-key="nav_home">‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</span></div>
            <div class="sidebar-link" onclick="openPanel('profilePanel')"><i class="fa-solid fa-user"></i> <span>‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span></div>
            <div class="sidebar-link" onclick="openPanel('newJobSelectPanel')"><i class="fa-solid fa-briefcase"></i> <span data-key="new_job">‡¶®‡¶ø‡¶â ‡¶ú‡¶¨</span></div>
            <div class="sidebar-link" onclick="openPanel('tutorialPanel')"><i class="fa-solid fa-play"></i> <span data-key="tutorial">‡¶ü‡¶ø‡¶â‡¶ü‡ßã‡¶∞‡¶ø‡ßü‡¶æ‡¶≤</span></div>
            <div class="sidebar-link" onclick="handleLogout()" style="color: #ff4444;"><i class="fa-solid fa-right-from-bracket"></i> <span>‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</span></div>
            <select class="lang-select" onchange="changeLanguage(this.value)"><option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option><option value="en">English (‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø)</option></select>
        </div>

        <div class="profile-area">
            <div class="user-avatar"><img id="display_pic" src="https://i.ibb.co/CKSzHY89/18714.jpg" alt="User"></div>
            <div class="user-info">
                <div class="user-name"><span id="display_name">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span> <i class="fa-solid fa-circle-check" style="color:#1d9bf0"></i></div>
                <div class="user-id-box">ID: <span id="display_id">0000</span></div>
                <div id="display_status_area"></div>
            </div>
            <div id="activate_btn_area"></div>
        </div>

        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon">‡ß≥</div>
                <div class="stat-text">
                    <div class="stat-label" data-key="balance">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</div>
                    <div id="display_balance" class="stat-value">‡ß≥ 0.00</div>
                </div>
            </div>
            <div class="stat-card" onclick="openPanel('withdrawPanel')">
                <div class="stat-icon"><i class="fa-solid fa-wallet"></i></div>
                <div class="stat-text">
                    <div class="stat-label" data-key="withdraw">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</div>
                    <div class="stat-value" data-key="withdraw_btn" style="color: var(--primary-yellow); font-size: 13px;">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</div>
                </div>
            </div>
        </div>

        <div class="job-grid">
            <div class="job-item" onclick="openJob('typing')"><div class="job-icon-box"><i class="fa-solid fa-keyboard" style="color: #4CAF50;"></i></div><span data-key="typing">‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶ú‡¶¨</span></div>
            <div class="job-item" onclick="openJob('tiktok')"><div class="job-icon-box"><i class="fa-brands fa-tiktok" style="color: #fff;"></i></div><span data-key="tiktok">‡¶ü‡¶ø‡¶ï‡¶ü‡¶ï ‡¶ú‡¶¨</span></div>
            <div class="job-item" onclick="openJob('like')"><div class="job-icon-box"><i class="fa-solid fa-thumbs-up" style="color: #2196F3;"></i></div><span data-key="like">‡¶≤‡¶æ‡¶á‡¶ï ‡¶´‡¶≤‡ßã</span></div>
            <div class="job-item" onclick="openJob('video')"><div class="job-icon-box"><i class="fa-solid fa-video" style="color: #f44336;"></i></div><span data-key="video_job">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ú‡¶¨</span></div>
            
            <!-- Ramadan Offer Tab -->
            <div class="job-item" onclick="openPanel('ramadanOfferPanel')">
                <div class="job-icon-box"><i class="fa-solid fa-moon" style="color: #00FF00;"></i></div>
                <span>‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶Ö‡¶´‡¶æ‡¶∞</span>
            </div>

            <!-- Islamic Tab -->
            <div class="job-item" onclick="openPanel('islamicPanel')">
                <div class="job-icon-box"><i class="fa-solid fa-kaaba" style="color: #4CAF50;"></i></div>
                <span>‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï</span>
            </div>

            <div class="job-item" onclick="openPanel('tutorialPanel')"><div class="job-icon-box"><i class="fa-solid fa-play" style="color: #ff9800;"></i></div><span data-key="tutorial">‡¶ü‡¶ø‡¶â‡¶ü‡ßã‡¶∞‡¶ø‡ßü‡¶æ‡¶≤</span></div>
            <div class="job-item" onclick="window.open('https://imgbb.com', '_blank')"><div class="job-icon-box"><i class="fa-solid fa-image" style="color: #673AB7;"></i></div><span data-key="leader">‡¶õ‡¶¨‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø</span></div>
        </div>

        <div class="invite-section">
            <div class="invite-title"><i class="fa-solid fa-user-plus" style="color:var(--primary-yellow)"></i> <span data-key="invite_title">‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶á‡¶®‡¶≠‡¶æ‡¶á‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</span></div>
            <div class="refer-box"><span id="referLink">https://ruzhanbd.netlify.app/?by=...</span><button class="copy-btn" onclick="copyLink()">Copy</button></div>
            <div class="social-icons">
                <i class="fa-brands fa-facebook" style="background: #1877F2; color: #fff;"></i>
                <i class="fa-brands fa-whatsapp" style="background: #25D366; color: #fff;"></i>
                <i class="fa-brands fa-telegram" style="background: #0088cc; color: #fff;"></i>
                <i class="fa-brands fa-facebook-messenger" style="background: #006AFF; color: #fff;"></i>
            </div>
        </div>

        <div class="quick-links-grid">
            <div class="link-card" id="support_btn"><i class="fa-solid fa-headset"></i><span data-key="support">‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</span></div>
            <div class="link-card" id="group_btn"><i class="fa-solid fa-users-viewfinder"></i><span>‡¶ó‡ßç‡¶∞‡ßÅ‡¶™</span></div>
            <div class="link-card" id="channel_btn"><i class="fa-solid fa-bullhorn"></i><span>‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</span></div>
        </div>

        <div class="section-heading" data-key="admin_title">OUR MAIN ADMIN</div>
        <div class="admin-card">
            <div class="main-admin-badge">MAIN ADMIN</div>
            <div class="admin-photo"><img id="admin_photo" src="https://i.ibb.co/CKSzHY89/18714.jpg" alt="Admin"></div>
            <div class="admin-info">
                <div class="admin-name" id="admin_name">Admin <i class="fa-solid fa-circle-check" style="color:#1d9bf0"></i></div>
                <div style="color:#4CAF50; font-size:13px;" id="admin_wa_text"><i class="fa-brands fa-whatsapp"></i> ...</div>
                <button class="message-btn" id="admin_tg_btn"><i class="fa-brands fa-telegram"></i> Message</button>
            </div>
        </div>

        <div class="navbar">
            <div class="active" onclick="location.reload()"><i class="fa-solid fa-house"></i><br><span data-key="nav_home">‡¶π‡ßã‡¶Æ</span></div>
            <div onclick="openPanel('referPanel')"><i class="fa-solid fa-users"></i><br><span data-key="nav_refer">‡¶∞‡ßá‡¶´‡¶æ‡¶∞</span></div>
            <div onclick="openPanel('profilePanel')"><i class="fa-solid fa-user"></i><br><span data-key="nav_profile">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span></div>
            <div onclick="openPanel('islamicPanel')"><i class="fa-solid fa-kaaba"></i><br><span data-key="islamic">‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï</span></div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyDZgBELp09FD6jFfS1W0uy2w539YzUmr7Y",
          authDomain: "daily-routine-6380b.firebaseapp.com",
          databaseURL: "https://daily-routine-6380b-default-rtdb.firebaseio.com",
          projectId: "daily-routine-6380b",
          storageBucket: "daily-routine-6380b.firebasestorage.app",
          messagingSenderId: "901069174414",
          appId: "1:901069174414:web:fa41fb855c15d8b7067bdf"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth();

        let CURRENT_USER_UID = null; 
        let dbData = null;
        let pendingType = ''; 
        let activeJobTitle = '';
        let activeJobKey = ''; 

        // Ramadan Offer Configuration
        const RAMADAN_LEVELS = [
            { id: 'r_bronze', name: '‡¶¨‡ßç‡¶∞‡ßã‡¶û‡ßç‡¶ú ‡¶≤‡ßá‡¶≠‡ßá‡¶≤', target: 10, cash: 20, gift: '‡¶®‡¶ó‡¶¶ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞', icon: 'fa-coins' },
            { id: 'r_gold', name: '‡¶ó‡ßã‡¶≤‡ßç‡¶° ‡¶≤‡ßá‡¶≠‡ßá‡¶≤', target: 20, cash: 30, gift: '‡¶®‡¶ó‡¶¶ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞', icon: 'fa-money-bill-wave' },
            { id: 'r_platinum', name: '‡¶™‡ßç‡¶≤‡¶æ‡¶ü‡¶ø‡¶®‡¶æ‡¶Æ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤', target: 30, cash: 45, gift: '‡¶®‡¶ó‡¶¶ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞', icon: 'fa-sack-dollar' },
            { id: 'r_diamond', name: '‡¶°‡¶æ‡¶Ø‡¶º‡¶Æ‡¶®‡ßç‡¶° ‡¶≤‡ßá‡¶≠‡ßá‡¶≤', target: 40, cash: 60, gift: '‡¶®‡¶ó‡¶¶ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞', icon: 'fa-gem' },
            { id: 'r_super', name: '‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤', target: 50, cash: 150, gift: '‡¶®‡¶ó‡¶¶ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞', icon: 'fa-star' },
            { id: 'r_grand', name: '‡¶ó‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶° ‡¶≤‡ßá‡¶≠‡ßá‡¶≤', target: 100, cash: 100, gift: 'RUZHAN Brand T-shirt', icon: 'fa-shirt' },
            { id: 'r_grandmaster', name: '‡¶ó‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶° ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤', target: 200, cash: 150, gift: 'T-shirt + Panjabi / ‡¶•‡ßç‡¶∞‡¶ø ‡¶™‡¶ø‡¶∏', icon: 'fa-user-tie' }
        ];

        const langData = {
            bn: { nav_home: "‡¶π‡ßã‡¶Æ", typing: "‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶ú‡¶¨", tiktok: "‡¶ü‡¶ø‡¶ï‡¶ü‡¶ï ‡¶ú‡¶¨", like: "‡¶≤‡¶æ‡¶á‡¶ï ‡¶´‡¶≤‡ßã", video_job: "‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ú‡¶¨", new_job: "‡¶®‡¶ø‡¶â ‡¶ú‡¶¨", tutorial: "‡¶ü‡¶ø‡¶â‡¶ü‡ßã‡¶∞‡¶ø‡ßü‡¶æ‡¶≤", support: "‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü", leader: "‡¶õ‡¶¨‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø", freelance: "‡¶´‡ßç‡¶∞‡¶ø‡¶≤‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏‡¶ø‡¶Ç", islamic: "‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï", balance: "‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏", withdraw: "‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®", withdraw_btn: "‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®", nav_refer: "‡¶∞‡ßá‡¶´‡¶æ‡¶∞", nav_profile: "‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤", invite_title: "‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶á‡¶®‡¶≠‡¶æ‡¶á‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®", admin_title: "‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®", menu_title: "‡¶Æ‡ßá‡¶®‡ßÅ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ", back: "‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®", work_link: "‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï", coin_label: "‡¶ï‡¶§ ‡¶ï‡ßü‡ßá‡¶® ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:", video_link: "‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ü‡¶ø‡¶â‡¶ü‡ßã‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤", ss_label: "‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ú‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®:", submit_btn: "‡¶ï‡¶æ‡¶ú ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®", v1: "‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶ú‡¶¨ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì", v2: "‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶®‡¶ø‡ßü‡¶Æ", v3: "‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ", v4: "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ", v5: "‡¶ü‡¶ø‡¶ï‡¶ü‡¶ï ‡¶ú‡¶¨ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì", v6: "‡¶≤‡¶æ‡¶á‡¶ï ‡¶´‡¶≤‡ßã ‡¶ú‡¶¨ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì", select_method: "‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®:", num_label: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡¶ü‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:", amount_label: "‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡ß≥):", coinsell: "‡¶ï‡ßü‡ßá‡¶® ‡¶∏‡ßá‡¶≤" },
            en: { nav_home: "Home", typing: "Typing Job", tiktok: "TikTok Job", like: "Like Follow", video_job: "Video Job", new_job: "New Job", tutorial: "Tutorial", support: "Support", leader: "Create Link", freelance: "Freelancing", islamic: "Islamic", balance: "Balance", withdraw: "Withdraw", withdraw_btn: "Withdraw Now", nav_refer: "Refer", nav_profile: "Profile", invite_title: "Invite Friends", admin_title: "OUR MAIN ADMIN", menu_title: "Menu List", back: "Go Back", work_link: "Work Link", coin_label: "Enter coins amount:", video_link: "Video Tutorial", ss_label: "Screenshot Link:", submit_btn: "Submit Work", v1: "Typing Job Video", v2: "Withdraw Rules", v3: "Refer Rules", v4: "Account Activation Rules", v5: "TikTok Job Video", v6: "Like Follow Job Video", select_method: "Select Payment Method:", num_label: "Enter your number:", amount_label: "Enter Withdrawal Amount (‡ß≥):", coinsell: "Coin Sell" }
        };

        function switchAuth(type) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            if(type === 'login') {
                document.getElementById('loginTab').classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.getElementById('signupTab').classList.add('active');
                document.getElementById('signupForm').classList.add('active');
            }
        }

        function handleSignup() {
            const name = document.getElementById('s_name').value;
            const email = document.getElementById('s_email').value;
            const phone = document.getElementById('s_phone').value;
            const pass = document.getElementById('s_pass').value;
            const refer = document.getElementById('s_refer').value;

            if(!name || !email || !phone || !pass || !refer) return alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶è‡¶¨‡¶Ç ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶®‡•§");
            if(phone.length !== 11) return alert("‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡ßß‡ßß ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§");
            if(pass.length !== 6) return alert("‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§");

            database.ref('nexora_db/users').orderByChild('id').equalTo(refer).once('value', (snapshot) => {
                if (snapshot.exists()) {
                    auth.createUserWithEmailAndPassword(email, pass).then((userCredential) => {
                        const uid = userCredential.user.uid;
                        database.ref('nexora_db/users/' + uid).set({
                            uid: uid, id: Math.floor(100000 + Math.random() * 900000).toString(),
                            name, email, phone, pass, balance: 0, referBalance: 0, pic: "", isActive: false,
                            referredBy: refer 
                        });
                        alert("‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶∏‡¶´‡¶≤!");
                    }).catch(e => alert(e.message));
                } else {
                    alert("‡¶≠‡ßÅ‡¶≤ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶°! ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ú‡¶® ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡•§");
                }
            });
        }

        function handleLogin() {
            const email = document.getElementById('l_email').value;
            const pass = document.getElementById('l_pass').value;
            if(!email || !pass) return alert("‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®‡•§");
            auth.signInWithEmailAndPassword(email, pass).then(() => alert("‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤!")).catch(e => alert(e.message));
        }

        function handleLogout() { auth.signOut().then(() => location.reload()); }

        auth.onAuthStateChanged((user) => {
            if (user) {
                CURRENT_USER_UID = user.uid;
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('appMain').style.display = 'block';
                syncData();
            } else {
                document.getElementById('authSection').style.display = 'flex';
                document.getElementById('appMain').style.display = 'none';
            }
        });

        function syncData() {
            database.ref('nexora_db').on('value', (snapshot) => {
                dbData = snapshot.val();
                if(dbData) updateUI();
            });
        }

        function updateUI() {
            const user = dbData.users[CURRENT_USER_UID];
            document.getElementById('notice-bar').innerText = dbData.notice || "‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!";
            
            if(user) {
                document.getElementById('display_name').innerText = user.name;
                document.getElementById('display_id').innerText = user.id;
                document.getElementById('display_balance').innerText = "‡ß≥ " + parseFloat(user.balance || 0).toFixed(2);
                document.getElementById('w_display_balance').innerText = "‡ß≥ " + parseFloat(user.balance || 0).toFixed(2);
                
                document.getElementById('refer_panel_balance').innerText = "‡ß≥ " + parseFloat(user.referBalance || 0).toFixed(2);
                document.getElementById('rw_display_balance').innerText = "‡ß≥ " + parseFloat(user.referBalance || 0).toFixed(2);
                
                document.getElementById('display_pic').src = user.pic || "https://i.ibb.co/CKSzHY89/18714.jpg";
                
                document.getElementById('referLink').innerText = "https://ruzhanbd.netlify.app/?by=" + user.id;
                document.getElementById('referLinkPanel').innerText = "https://ruzhanbd.netlify.app/?by=" + user.id;

                const statusArea = document.getElementById('display_status_area');
                const activateBtnArea = document.getElementById('activate_btn_area');
                if(user.isActive) {
                    statusArea.innerHTML = `<span class="id-status-badge status-active">ACTIVE ID</span>`;
                    activateBtnArea.innerHTML = '';
                } else {
                    statusArea.innerHTML = `<span class="id-status-badge status-inactive">INACTIVE ID</span>`;
                    activateBtnArea.innerHTML = user.activationPending ? 
                        `<button class="activate-btn-ui" style="background:#333; cursor:default;">‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶π‡¶ö‡ßç‡¶õ‡ßá</button>` : 
                        `<button class="activate-btn-ui" onclick="openPanel('activationPanel')">Activate ID</button>`;
                }
                
                const activeTeam = Object.values(dbData.users).filter(u => u.referredBy === user.id && u.isActive === true);
                const activeCount = activeTeam.length;
                document.getElementById('display_team_count').innerText = activeCount + " ‡¶ú‡¶® (‡¶è‡¶ï‡¶ü‡¶ø‡¶≠)";
                renderTeamList(activeTeam);
                renderRamadanOffers(activeCount, user); // ‡¶∞‡¶Æ‡¶ú‡¶æ‡¶® ‡¶Ö‡¶´‡¶æ‡¶∞ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞

                document.getElementById('u_name').value = user.name;
                document.getElementById('u_phone').value = user.phone;
                document.getElementById('u_email').value = user.email;
                document.getElementById('u_pass').value = user.pass || "";
                document.getElementById('u_pic').value = user.pic || "";
            }

            if(dbData.config) {
                document.getElementById('admin_name').innerHTML = dbData.config.adminName + ' <i class="fa-solid fa-circle-check" style="color:#1d9bf0"></i>';
                document.getElementById('admin_wa_text').innerHTML = '<i class="fa-brands fa-whatsapp"></i> ' + dbData.config.wa;
                document.getElementById('admin_photo').src = dbData.config.adminPhoto || "https://i.ibb.co/CKSzHY89/18714.jpg";
                document.getElementById('admin_tg_btn').onclick = () => window.open(dbData.config.adminTg, '_blank');
                document.getElementById('channel_btn').onclick = () => window.open(dbData.config.channel, '_blank');
                document.getElementById('group_btn').onclick = () => window.open(dbData.config.support, '_blank');
                document.getElementById('support_btn').onclick = () => window.open("https://wa.me/" + dbData.config.wa, '_blank');
                document.getElementById('act_bkash').innerText = dbData.config.bkash || "017XXXXXXXX";
                document.getElementById('act_nagad').innerText = dbData.config.nagad || "018XXXXXXXX";
                document.getElementById('act_rocket').innerText = dbData.config.rocket || "019XXXXXXXX";
                document.getElementById('display_activation_fee').innerText = dbData.config.activationFee || "0";
                
                const tuts = ['Typing', 'Tiktok', 'Like', 'Withdraw', 'Refer', 'Active'];
                tuts.forEach(t => {
                   const el = document.getElementById('tut' + t + 'Link');
                   if(el) el.onclick = () => window.open(dbData.config['tut' + t], '_blank');
                });
            }
            renderWithdrawList();
            if(activeJobTitle) renderJobHistory(activeJobTitle);
        }

        // --- Ramadan Logic ---
        function renderRamadanOffers(activeCount, user) {
            const container = document.getElementById('ramadanListContainer');
            const claimed = user.claimedRamadanRewards || {};

            container.innerHTML = RAMADAN_LEVELS.map(level => {
                const progress = Math.min((activeCount / level.target) * 100, 100);
                const isClaimed = claimed[level.id] === true;
                const canClaim = activeCount >= level.target && !isClaimed;

                let btnClass = 'claim-btn';
                let btnAttr = 'disabled';
                let btnText = '‡¶∂‡¶∞‡ßç‡¶§ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶π‡ßü‡¶®‡¶ø';

                if(isClaimed) {
                    btnClass += ' claimed';
                    btnText = '‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßá‡ßü‡ßá‡¶õ‡ßá‡¶®';
                } else if(canClaim) {
                    btnClass += ' ready';
                    btnText = '‡¶ï‡ßç‡¶≤‡ßá‡¶á‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®';
                    btnAttr = `onclick="claimRamadanReward('${level.id}', ${level.cash})"`;
                }

                return `
                    <div class="target-card" style="border-left-color: #00FF00;">
                        <div class="target-header">
                            <span class="target-name" style="color:#00FF00;">${level.name}</span>
                            <span class="target-reward-tag" style="background:#0a2a0a; color:#00FF00;">‡ß≥ ${level.cash}</span>
                        </div>
                        <div class="prize-display">
                            <i class="fa-solid ${level.icon}" style="color:#00FF00;"></i>
                            <span>‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞: ${level.gift}</span>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar-fill" style="background: linear-gradient(90deg, #00FF00, #008000); width: ${progress}%"></div>
                        </div>
                        <div class="progress-text">
                            <span>‡¶™‡ßç‡¶∞‡¶ó‡ßç‡¶∞‡ßá‡¶∏: ${activeCount}/${level.target} ‡¶ú‡¶®</span>
                            <span>${Math.floor(progress)}%</span>
                        </div>
                        <button class="${btnClass}" ${btnAttr}>${btnText}</button>
                    </div>
                `;
            }).join('');
        }

        function claimRamadanReward(levelId, amount) {
            const user = dbData.users[CURRENT_USER_UID];
            database.ref(`nexora_db/users/${CURRENT_USER_UID}`).update({
                balance: parseFloat(user.balance || 0) + amount,
                [`claimedRamadanRewards/${levelId}`]: true
            }).then(() => alert("‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡ßç‡¶≤‡ßá‡¶á‡¶Æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!"));
        }

        function toggleTeamList() {
            const area = document.getElementById('teamListArea');
            area.style.display = area.style.display === 'none' ? 'block' : 'none';
        }

        function renderTeamList(members) {
            const container = document.getElementById('teamMembersContainer');
            if(members.length === 0) {
                container.innerHTML = '<p style="text-align:center; color:#666; font-size:13px;">‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßá‡¶â ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ü‡¶ø‡¶Æ‡ßá ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶®‡ßá‡¶á‡•§</p>';
                return;
            }
            container.innerHTML = members.map(m => `
                <div class="team-member-item">
                    <div style="display:flex; align-items:center; gap:10px;">
                        <img src="${m.pic || 'https://i.ibb.co/CKSzHY89/18714.jpg'}" style="width:35px; height:35px; border-radius:50%; background:#fff; border:1px solid #333;">
                        <div>
                            <div style="font-size:14px; font-weight:bold;">${m.name}</div>
                            <div style="font-size:10px; color:#888;">ID: ${m.id}</div>
                        </div>
                    </div>
                    <span class="id-status-badge status-active">ACTIVE</span>
                </div>
            `).join('');
        }

        function openReferWithdraw() { openPanel('referWithdrawPanel'); }

        function initiateReferWithdraw() {
            const user = dbData.users[CURRENT_USER_UID];
            const amount = parseFloat(document.getElementById('rw_amount').value);
            if(amount < 50 || isNaN(amount)) return alert("‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ‡•§");
            if(amount > parseFloat(user.referBalance || 0)) return alert("‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏‡ßá ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶®‡ßá‡¶á!");
            pendingType = 'referWithdraw';
            document.getElementById('prayerPopup').style.display = 'flex';
        }

        function calculateTaka() {
            const coins = document.getElementById('work_coins').value || 0;
            let rate = 0;
            if(dbData && dbData.jobs && activeJobKey && dbData.jobs[activeJobKey]) {
                rate = parseFloat(dbData.jobs[activeJobKey].coinRate) || 0;
            }
            document.getElementById('coinToTaka').innerText = "‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶ï‡¶æ: ‡ß≥ " + (parseFloat(coins) * rate).toFixed(2);
        }

        function openJob(key) {
            const user = dbData.users[CURRENT_USER_UID];
            if(!user.isActive) return alert("‡¶Ü‡¶á‡¶°‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            activeJobKey = key; 
            const job = dbData.jobs[key];
            if(!job) return alert("‡¶è‡¶á ‡¶ú‡¶¨‡¶ü‡¶ø ‡¶è‡¶ñ‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§");
            activeJobTitle = (key === 'coinsell' ? '‡¶ï‡ßü‡ßá‡¶® ‡¶∏‡ßá‡¶≤' : job.title);
            document.getElementById('p_title').innerText = activeJobTitle;
            document.getElementById('p_work_link').href = job.link;
            document.getElementById('p_video_link').href = job.video;
            document.getElementById('work_coins').value = "";
            document.getElementById('coinToTaka').innerText = "‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶ï‡¶æ: ‡ß≥ 0.00";
            
            if(key === 'coinsell'){
                document.getElementById('coin_apply_box').style.display = 'block';
            } else {
                document.getElementById('coin_apply_box').style.display = 'none';
            }

            renderJobHistory(activeJobTitle);
            document.getElementById('jobPanel').style.display = 'block';
            if(document.getElementById('newJobSelectPanel').style.display === 'block') {
                document.getElementById('newJobSelectPanel').style.display = 'none';
            }
        }

        function submitWork() {
            if(!document.getElementById('work_coins').value || !document.getElementById('screenshot_link').value) return alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®‡•§");
            pendingType = 'job';
            document.getElementById('prayerPopup').style.display = 'flex';
        }

        function submitCoinSellApplication() {
            const amount = parseFloat(document.getElementById('apply_coins_val').value);
            if(!amount || isNaN(amount)) return alert("‡¶ï‡ßü‡ßá‡¶® ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§");
            if(amount < 5000000) return alert("‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® 50 ‡¶≤‡¶æ‡¶ñ (5000000) ‡¶ï‡ßü‡ßá‡¶® ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§");
            
            pendingType = 'coinApply';
            document.getElementById('prayerPopup').style.display = 'flex';
        }

        function initiateWithdraw() {
            const user = dbData.users[CURRENT_USER_UID];
            const amount = parseFloat(document.getElementById('w_amount').value);
            if(amount < 50 || isNaN(amount)) return alert("‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ‡•§");
            if(amount > parseFloat(user.balance || 0)) return alert("‡¶™‡¶∞‡ßç‡¶™‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á!");
            pendingType = 'withdraw';
            document.getElementById('prayerPopup').style.display = 'flex';
        }

        function confirmPrayerSubmit() {
            const prayers = {}; 
            document.querySelectorAll('.prayer-row').forEach(r => {
                const active = r.querySelector('.prayer-btn.active');
                prayers[r.dataset.prayer] = active ? (active.classList.contains('yes') ? 'yes' : 'no') : 'no';
            });
            const date = new Date().toLocaleString('bn-BD');
            const user = dbData.users[CURRENT_USER_UID];

            if(pendingType === 'withdraw') {
                database.ref('nexora_db/withdraws').push({
                    userId: user.id, userName: user.name, method: document.getElementById('w_method').value,
                    number: document.getElementById('w_number').value, amount: parseFloat(document.getElementById('w_amount').value),
                    status: 'Pending', prayers, date, wallet: 'Main'
                });
                const newBal = parseFloat(user.balance || 0) - parseFloat(document.getElementById('w_amount').value);
                database.ref(`nexora_db/users/${CURRENT_USER_UID}/balance`).set(newBal);
                document.getElementById('w_number').value = "";
                document.getElementById('w_amount').value = "";
            } 
            else if(pendingType === 'referWithdraw') {
                database.ref('nexora_db/withdraws').push({
                    userId: user.id, userName: user.name, method: document.getElementById('rw_method').value,
                    number: document.getElementById('rw_number').value, amount: parseFloat(document.getElementById('rw_amount').value),
                    status: 'Pending', prayers, date, wallet: 'Referral'
                });
                const newRefBal = parseFloat(user.referBalance || 0) - parseFloat(document.getElementById('rw_amount').value);
                database.ref(`nexora_db/users/${CURRENT_USER_UID}/referBalance`).set(newRefBal);
                document.getElementById('rw_number').value = "";
                document.getElementById('rw_amount').value = "";
                closePanel('referWithdrawPanel');
            }
            else if(pendingType === 'job') {
                let rate = (dbData.jobs && activeJobKey && dbData.jobs[activeJobKey]) ? parseFloat(dbData.jobs[activeJobKey].coinRate) : 0;
                let submittedCoins = parseFloat(document.getElementById('work_coins').value);
                let calculatedAmount = (submittedCoins * rate).toFixed(2);
                database.ref('nexora_db/submissions').push({
                    userId: user.id, jobTitle: activeJobTitle, coins: submittedCoins, amount: calculatedAmount, ssLink: document.getElementById('screenshot_link').value,
                    status: 'Pending', prayers, date
                });
                document.getElementById('work_coins').value = "";
                document.getElementById('screenshot_link').value = "";
                document.getElementById('coinToTaka').innerText = "‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶ï‡¶æ: ‡ß≥ 0.00";
            }
            else if(pendingType === 'coinApply') {
                const coins = parseFloat(document.getElementById('apply_coins_val').value);
                database.ref('nexora_db/coin_sell_applications').push({
                    userId: user.id, userName: user.name, userPhone: user.phone, coins: coins, status: 'Pending', prayers: prayers, date: date
                });
                document.getElementById('apply_coins_val').value = "";
                alert("‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
            }

            document.getElementById('prayerPopup').style.display = 'none';
            if(pendingType !== 'coinApply') alert("‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
        }

        function getPrayerHistoryHTML(prayers) {
            if(!prayers) return '';
            const list = [{k:'Fajr', n:'‡¶´‡¶ú‡¶∞'}, {k:'Dhuhr', n:'‡¶Ø‡ßã‡¶π‡¶∞'}, {k:'Asr', n:'‡¶Ü‡¶∏‡¶∞'}, {k:'Maghrib', n:'‡¶Æ‡¶æ‡¶ó‡¶∞‡¶ø‡¶¨'}, {k:'Isha', n:'‡¶è‡¶∂‡¶æ'}];
            return `<div class="history-prayer-row">` + list.map(p => {
                    const status = prayers[p.k] === 'yes';
                    return `<span class="mini-prayer-tag ${status ? 'p-tag-yes' : 'p-tag-no'}"><i class="fa-solid ${status ? 'fa-check' : 'fa-xmark'}"></i> ${p.n}</span>`;
                }).join('') + `</div>`;
        }

        function renderWithdrawList() {
            const listDiv = document.getElementById('withdrawList');
            if(!dbData.withdraws) return listDiv.innerHTML = '<p style="text-align:center;">‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶®‡ßá‡¶á‡•§</p>';
            const user = dbData.users[CURRENT_USER_UID];
            const myWithdraws = Object.values(dbData.withdraws).filter(w => w.userId === user.id).reverse();
            listDiv.innerHTML = myWithdraws.map(item => `
                <div class="history-card">
                    <div class="history-header"><span class="history-title"><i class="fa-solid fa-wallet"></i> ${item.method} (${item.wallet || 'Main'})</span><span class="status-badge status-${item.status.toLowerCase()}">${item.status}</span></div>
                    <div style="font-size: 11px; color: #888;">‡¶®‡¶Æ‡ßç‡¶¨‡¶∞: ${item.number}</div>
                    ${getPrayerHistoryHTML(item.prayers)}
                    <div class="history-body"><div class="amount-text">‡ß≥ ${item.amount}</div><div style="font-size:11px;">${item.date}</div></div>
                </div>`).join('');
        }

        function renderJobHistory(title) {
            const listDiv = document.getElementById('jobHistoryList');
            const user = dbData.users[CURRENT_USER_UID];
            let combinedHistory = [];
            if(dbData.submissions) {
                const subs = Object.values(dbData.submissions).filter(s => s.userId === user.id && s.jobTitle === title);
                combinedHistory = combinedHistory.concat(subs);
            }
            if(title === '‡¶ï‡ßü‡ßá‡¶® ‡¶∏‡ßá‡¶≤' && dbData.coin_sell_applications) {
                const apps = Object.values(dbData.coin_sell_applications).filter(a => a.userId === user.id);
                const appsWithTitle = apps.map(item => ({...item, jobTitle: '‡¶ï‡ßü‡ßá‡¶® ‡¶∏‡ßá‡¶≤ (‡¶Ü‡¶¨‡ßá‡¶¶‡¶®)'}));
                combinedHistory = combinedHistory.concat(appsWithTitle);
            }
            if(combinedHistory.length === 0) return listDiv.innerHTML = '<p style="text-align:center;">‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶®‡ßá‡¶á‡•§</p>';
            combinedHistory.sort((a, b) => new Date(b.date) - new Date(a.date));
            listDiv.innerHTML = combinedHistory.map(item => `
                <div class="history-card">
                    <div class="history-header">
                        <span class="history-title"><i class="fa-solid fa-briefcase"></i> ${item.jobTitle}</span>
                        <span class="status-badge status-${item.status.toLowerCase()}">${item.status}</span>
                    </div>
                    ${getPrayerHistoryHTML(item.prayers)}
                    <div class="history-body">
                        <div class="amount-text">${item.coins} Coins ${item.amount ? '(‡ß≥ ' + item.amount + ')' : ''}</div>
                        <div style="font-size:11px;">${item.date}</div>
                    </div>
                </div>`).join('');
        }

        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('active'); document.getElementById('overlay').style.display = document.getElementById('sidebar').classList.contains('active') ? 'block' : 'none'; }
        function openPanel(id) { document.getElementById(id).style.display = 'block'; }
        function closePanel(id) { document.getElementById(id).style.display = 'none'; if(id === 'jobPanel') activeJobTitle = ''; if(id === 'referPanel') document.getElementById('teamListArea').style.display = 'none'; }
        
        function copyLink() { 
            const textToCopy = document.getElementById('referLink').innerText;
            const tempInput = document.createElement("input");
            tempInput.value = textToCopy;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
            alert("Refer Link Copied!"); 
        }
        
        function copyText(id) { 
            const textToCopy = document.getElementById(id).innerText;
            const tempInput = document.createElement("input");
            tempInput.value = textToCopy;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
            alert("‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá: " + textToCopy); 
        }

        function selectPrayer(btn, status) { btn.closest('.prayer-btns').querySelectorAll('.prayer-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); }
        function changeLanguage(lang) { document.querySelectorAll('[data-key]').forEach(el => { const key = el.getAttribute('data-key'); if(langData[lang][key]) el.innerText = langData[lang][key]; }); }
        
        function submitActivation() {
            const trx = document.getElementById('a_trxid').value;
            const ss = document.getElementById('a_ss_link').value;
            const amountInput = document.getElementById('a_amount').value;
            const requiredFee = dbData.config.activationFee || "0";
            if(!trx || !ss || !amountInput) return alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®‡•§");
            if(parseFloat(amountInput) !== parseFloat(requiredFee)) return alert("‡¶≠‡ßÅ‡¶≤ ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£! ‡¶Ü‡¶á‡¶°‡¶ø ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á " + requiredFee + " ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§");
            database.ref('nexora_db/activation_requests').push({ uid: CURRENT_USER_UID, userId: dbData.users[CURRENT_USER_UID].id, method: document.getElementById('a_method').value, amount: amountInput, trxId: trx, ssLink: ss, date: new Date().toLocaleString('bn-BD') });
            database.ref('nexora_db/users/' + CURRENT_USER_UID + '/activationPending').set(true);
            alert("‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
            closePanel('activationPanel');
        }
        
        function saveProfile() {
            database.ref('nexora_db/users/' + CURRENT_USER_UID).update({ name: document.getElementById('u_name').value, phone: document.getElementById('u_phone').value, pass: document.getElementById('u_pass').value, pic: document.getElementById('u_pic').value });
            alert("‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
            closePanel('profilePanel');
        }
    </script>
</body>
</html>